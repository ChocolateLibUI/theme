(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const q="modulepreload",K=function(i,e){return new URL(i,e).href},M={},p=function(e,t,s){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=K(r,s),r in M)return;M[r]=!0;const a=r.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(!!s)for(let l=n.length-1;l>=0;l--){const c=n[l];if(c.href===r&&(!a||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${h}`))return;const o=document.createElement("link");if(o.rel=a?"stylesheet":q,a||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),a)return new Promise((l,c)=>{o.addEventListener("load",l),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};let _=[],W=async i=>{_.includes(i)?console.warn("Document registered with theme engine twice"):(_.push(i),(await p(()=>Promise.resolve().then(()=>N),void 0,import.meta.url)).applyTheme(i,await(await p(()=>Promise.resolve().then(()=>N),void 0,import.meta.url)).theme.get),(await p(()=>Promise.resolve().then(()=>ie),void 0,import.meta.url)).initTouch(i),(await p(()=>Promise.resolve().then(()=>ne),void 0,import.meta.url)).initScale(i))};W(document);let C=(i,e)=>{let t=new TextEncoder().encode(i);return i=new TextDecoder().decode(t.slice(0,e)),i.at(-1)?.charCodeAt(0)===65533?i.slice(0,-1):i};class w{___valueListeners=[];___value;info;constructor(e){this.___value=e}addListener(e,t){if(this.___valueListeners.push(e),t){let s=this.get;s instanceof Promise?s.then(e):e(s)}return e}removeListener(e){let t=this.___valueListeners.indexOf(e);return t!=-1&&this.___valueListeners.splice(t,1),e}get get(){return this.___value}set set(e){this.___value!==e&&(this.___value=e,this.___update())}___update(){if(this.___valueListeners)for(let e=0,t=this.___valueListeners.length;e<t;e++)try{this.___valueListeners[e](this.___value)}catch(s){console.warn("Failed while calling value listeners ",s)}}compare(e){let t=this.get;return t instanceof Promise?t.then(s=>e!==s):e!==t}get inUse(){return this.___valueListeners.length!==0}hasListener(e){return this.___valueListeners.indexOf(e)!==-1}toJSON(){return this.___value}}class R extends w{___limiters;___limitersListeners=[];constructor(e,t){super(e),this.___limiters=t}addLimiterListener(e,t){return this.___limitersListeners.push(e),t&&e(this),e}removeLimiterListener(e){let t=this.___limitersListeners.indexOf(e);return t!=-1&&this.___limitersListeners.splice(t,1),e}___updateLimiter(){if(this.___limitersListeners)for(let e=0,t=this.___limitersListeners.length;e<t;e++)try{this.___limitersListeners[e](this)}catch(s){console.warn("Failed while calling value listeners ",s)}}get limiters(){return this.___limiters}set limiters(e){e?this.___limiters=e:delete this.___limiters,this.___updateLimiter()}checkLimit(e){if(this.___limiters){for(let t=0;t<this.___limiters.length;t++)if(this.___limiters[t].func(e))return!1}return!0}checkLimitReason(e){if(this.___limiters){for(let t=0;t<this.___limiters.length;t++)if(this.___limiters[t].func(e))switch(typeof this.___limiters[t].reason){case"string":return this.___limiters[t].reason;case"function":return this.___limiters[t].reason(e)}}return!0}set set(e){e===this.___value||!this.checkLimit(e)||(this.___value=e,this.___update())}}class b extends R{_min;_max;_step;halfStep=0;constructor(e,t=-1/0,s=1/0,n,r){super(e,r),this._min=t,this._max=s,n&&(this._step=n,this.halfStep=n/2)}get min(){return this._min}set min(e){this._min=e;let t=Math.max(this._min,this.___value);this.___value!==t&&(this.___value=t,this.___update()),this.___updateLimiter()}get max(){return this._max}set max(e){this._max=e;let t=Math.min(this._max,this.___value);this.___value!==t&&(this.___value=t,this.___update()),this.___updateLimiter()}get step(){return this._step}set step(e){if(e){this._step=e,this.halfStep=e/2;let t=this.___value%this._step,s=t>this.halfStep?this.___value+(this._step-t):this.___value-t;s!==this.___value&&(this.___value=s,this.___update())}else delete this._step,this.halfStep=0;this.___updateLimiter()}set set(e){if(this._step){let t=e%this._step;e=t>this.halfStep?e+(this._step-t):e-t}e=Math.min(this._max,Math.max(this._min,e)),e!==this.___value&&this.checkLimit(e)&&(this.___value=e,this.___update())}}class T extends R{_maxLength;_maxByteLength;___enums;constructor(e,t,s,n,r){super(e,r),this._maxLength=s,this._maxByteLength=n,this.___enums=t}get enums(){return this.___enums}set enums(e){if(e){if(this.___enums=e,!this.checkEnum(this.___value))for(const t in this.___enums){this.___value=t,this.___update();return}}else delete this.___enums;this.___updateLimiter()}get enum(){if(this.___enums)return this.___enums[this.___value]}checkEnum(e){return!this.___enums||e in this.___enums}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e,this._maxLength&&this.___value.length>this._maxLength&&(this.___value=this.___value.slice(0,this._maxLength),this.___update()),this.___updateLimiter()}get maxByteLength(){return this._maxByteLength}set maxByteLength(e){if(this._maxByteLength=e,this._maxByteLength){let t=C(this.___value,this._maxByteLength);this.___value!==t&&(this.___value=t,this.___update())}this.___updateLimiter()}set set(e){this._maxLength&&e.length>this._maxLength&&(e=e.slice(0,this._maxLength)),this._maxByteLength&&(e=C(e,this._maxByteLength)),e!==this.___value&&this.checkLimit(e)&&this.checkEnum(e)&&(this.___value=e,this.___update())}}var Q=Object.defineProperty,X=(i,e,t)=>e in i?Q(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,g=(i,e,t)=>(X(i,typeof e!="symbol"?e+"":e,t),t);let B={},Y=(i,e,t)=>(B[i]=new O(i,e,t),B[i]);class O{constructor(e,t,s){g(this,"pathID"),g(this,"settings",{}),g(this,"subGroups",{}),g(this,"name"),g(this,"description"),this.pathID=e,this.name=t,this.description=s}makeSubGroup(e,t,s){if(e in this.subGroups){console.warn("Sub group already registered "+e);return}else return this.subGroups[e]=new O(this.pathID+"/"+e,t,s)}makeBooleanSetting(e,t,s,n){if(e in this.settings)throw new Error("Settings already registered "+e);let r=localStorage[this.pathID+"/"+e];if(r)var a=new w(JSON.parse(r));else if(typeof n=="boolean")var a=new w(n);else{var a=new w(!1);n.then(u=>{a.set=u})}return a.info={name:t,description:s},a.addListener(h=>{localStorage[this.pathID+"/"+e]=JSON.stringify(h)},!r),this.settings[e]=a}makeNumberSetting(e,t,s,n,r,a,h,u){if(e in this.settings)throw new Error("Settings already registered "+e);let o=localStorage[this.pathID+"/"+e];if(o)var l=new b(JSON.parse(o),r,a,h,u);else if(typeof n=="number")var l=new b(n,r,a,h,u);else{var l=new b(NaN,r,a,h,u);n.then(E=>{l.set=E})}return l.info={name:t,description:s},l.addListener(c=>{localStorage[this.pathID+"/"+e]=JSON.stringify(c)},!o),this.settings[e]=l}makeStringSetting(e,t,s,n,r,a,h,u){if(e in this.settings)throw new Error("Settings already registered "+e);let o=localStorage[this.pathID+"/"+e];if(o)var l=new T(JSON.parse(o),r,a,h,u);else if(typeof n=="string")var l=new T(n,r,a,h,u);else{var l=new T("",r,a,h,u);n.then(E=>{l.set=E})}return l.info={name:t,description:s},l.addListener(c=>{localStorage[this.pathID+"/"+e]=JSON.stringify(c)},!o),this.settings[e]=l}}let y=Y((await p(()=>import("./package.8acd5b44.js"),[],import.meta.url)).name,"Theme/UI","Settings for UI elements and and color themes"),Z={light:{name:"Light",description:"Don't set touch mode automatically"},dark:{name:"Dark",description:"Change touch mode on first ui interaction"}},f=y.makeStringSetting("theme","Theme","Color theme of UI",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",Z),S=y.makeBooleanSetting("autoTheme","Automatic Theme Change","Toggle for automatically changing theme",!0),I=async(i,e,t)=>{if(i in L.light)console.warn("Theme variable already registered "+i);else{L.light[i]=e,L.dark[i]=t;for(let s=0;s<_.length;s++)_[s].documentElement.style.setProperty("--"+i,L[await f.get][i])}},U=(i,e)=>{let t=i.documentElement.style,s=L[e];for(let n in s)t.setProperty("--"+n,s[n])};f.addListener(i=>{for(let e=0;e<_.length;e++)U(_[e],i)});let L={light:{},dark:{}};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{S.get&&(f.set=i.matches?"dark":"light")});const N=Object.freeze(Object.defineProperty({__proto__:null,theme:f,autoTheme:S,registerVariable:I,applyTheme:U},Symbol.toStringTag,{value:"Module"}));var D=(i=>(i.off="off",i.first="first",i.every="every",i))(D||{});let ee={off:{name:"Off",description:"Don't set touch mode automatically"},first:{name:"First Interaction",description:"Change touch mode on first ui interaction"},every:{name:"Every Interaction",description:"Change touch mode on every ui interaction"}},m=y.makeBooleanSetting("touch","Touch Mode","Toggle between touch friendly or mouse friendly UI",!1),v=y.makeStringSetting("autoTouch","Automatic Touch Mode","Mode for automatically changing touch mode","every",ee),te=i=>{A(i,m.get),V(i,v.get)};m.addListener(i=>{for(let e=0;e<_.length;e++)A(_[e],i)});v.addListener(i=>{for(let e=0;e<_.length;e++)V(_[e],i)});let A=(i,e)=>{e?i.documentElement.classList.add("touch"):i.documentElement.classList.remove("touch")},k=i=>{switch(i.pointerType){case"touch":m.set=!0;break;case"mouse":case"pen":default:m.set=!1;break}},x=i=>{k(i);for(let e=0;e<_.length;e++)_[e].documentElement.removeEventListener("pointerdown",x)},V=(i,e)=>{switch(i.documentElement.removeEventListener("pointerdown",x),i.documentElement.removeEventListener("pointerdown",k),e){case"first":i.documentElement.addEventListener("pointerdown",x,{passive:!0});break;case"every":i.documentElement.addEventListener("pointerdown",k,{passive:!0});break}};const ie=Object.freeze(Object.defineProperty({__proto__:null,AutoTouchMode:D,touch:m,autoTouch:v,initTouch:te},Symbol.toStringTag,{value:"Module"}));let d=y.makeNumberSetting("scale","UI Scale","The scale of the UI",1,.2,4),se=async i=>{H(i)},j=16;d.addListener(i=>{j=i*16;for(let e=0;e<_.length;e++)H(_[e])});let H=i=>{i.documentElement.style.fontSize=j+"px"};const ne=Object.freeze(Object.defineProperty({__proto__:null,scale:d,initScale:se},Symbol.toStringTag,{value:"Module"}));I("test","blue","black");I("test2","test","asdf");document.body.style.backgroundColor="var(--test)";let J=document.body.appendChild(document.createElement("button"));J.innerHTML="Turn Auto Theme Off";J.addEventListener("click",()=>{S.set=!1});let $=document.body.appendChild(document.createElement("button"));$.innerHTML="Turn Auto Theme On";$.addEventListener("click",()=>{S.set=!0});let re=f.enums;for(const i in re){let e=document.body.appendChild(document.createElement("button"));e.innerHTML=i,e.addEventListener("click",()=>{f.set=i})}let z=document.body.appendChild(document.createElement("button"));z.innerHTML="Toggle Touch";z.addEventListener("click",async()=>{m.set=!await m.get});let P=document.body.appendChild(document.createElement("select"));Object.values(D).forEach(i=>{let e=P.appendChild(document.createElement("option"));e.innerHTML=i});P.addEventListener("change",async i=>{v.set=i.currentTarget.selectedOptions[0].innerHTML});(async()=>P.value=await v.get)();let F=document.body.appendChild(document.createElement("button"));F.innerHTML="Scale Down";F.addEventListener("click",async()=>{d.set=await d.get-.2});let G=document.body.appendChild(document.createElement("button"));G.innerHTML="Scale Up";G.addEventListener("click",async()=>{d.set=await d.get+.2});
