var U=Object.defineProperty;var V=(i,t,e)=>t in i?U(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var l=(i,t,e)=>(V(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();class G{constructor(t,e,s){l(this,"type");l(this,"target");l(this,"data");this.type=t,this.target=e,this.data=s}}class J{constructor(){l(this,"target");l(this,"eventHandler_ListenerStorage",{})}on(t,e){let s=this.eventHandler_ListenerStorage[t];return s?s.indexOf(e)==-1?s.push(e):console.warn("Listener already in handler"):this.eventHandler_ListenerStorage[t]=[e],e}once(t,e){return this.on(t,function(s){return e(s),!0}),e}off(t,e){let s=this.eventHandler_ListenerStorage[t];if(s){let n=s.indexOf(e);n!=-1?s.splice(n,1):console.warn("Listener not in handler")}return e}emit(t,e){let s=this.eventHandler_ListenerStorage[t];if(s&&s.length>0){let n=Object.freeze(new G(t,this.target||this,e));s.length>1&&(s=[...s]);for(let o=0,c=s.length;o<c;o++)try{s[o](n)&&(s.splice(o,1),c--,o--)}catch(u){console.warn("Failed while dispatching event",u)}}}clear(t){this.eventHandler_ListenerStorage[t]=[]}inUse(t){var e;return Boolean((e=this.eventHandler_ListenerStorage[t])==null?void 0:e.length)}has(t,e){var s;return Boolean(((s=this.eventHandler_ListenerStorage[t])==null?void 0:s.indexOf(e))!==-1)}amount(t){var e;return((e=this.eventHandler_ListenerStorage[t])==null?void 0:e.length)||0}get eventsUserOnly(){return this}}var F=Object.defineProperty,j=(i,t,e)=>t in i?F(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,T=(i,t,e)=>(j(i,typeof t!="symbol"?t+"":t,e),e);class q{constructor(t){T(this,"_documents"),T(this,"main"),T(this,"_events"),T(this,"events"),this.main=t,this._documents=[t],this._events=new J,this._events.target=this,this.events=this._events.eventsUserOnly}forDocuments(t){for(let e=0;e<this._documents.length;e++)t(this._documents[e])}get documents(){return[...this._documents]}registerDocument(t,e){if(this._documents.includes(t))return console.warn("Document registered twice");if(this._documents.push(t),e){let s=this.main.head.children;for(let n=0;n<s.length;n++)switch(s[n].nodeName){case"LINK":if(s[n].rel!=="stylesheet")break;case"STYLE":t.head.appendChild(s[n].cloneNode(!0));break}}this._events.emit("added",t)}deregisterDocument(t){let e=this._documents.indexOf(t);if(e==-1)return console.warn("Document not registered");if(this._documents[e]===this.main)return console.warn("Main document cannot be removed");this._documents.splice(e,1),this._events.emit("removed",t)}}const A="@chocolatelibui/theme";let N=(i,t)=>{var s;let e=new TextEncoder().encode(i);return i=new TextDecoder().decode(e.slice(0,t)),((s=i.at(-1))==null?void 0:s.charCodeAt(0))===65533?i.slice(0,-1):i};class M{constructor(t){l(this,"___valueListeners",[]);l(this,"___value");l(this,"info");this.___value=t}addListener(t,e){if(this.___valueListeners.push(t),e){let s=this.get;s instanceof Promise?s.then(t):t(s)}return t}removeListener(t){let e=this.___valueListeners.indexOf(t);return e!=-1&&this.___valueListeners.splice(e,1),t}get get(){return this.___value}set set(t){this.___value!==t&&(this.___value=t,this.___update())}___update(){if(this.___valueListeners)for(let t=0,e=this.___valueListeners.length;t<e;t++)try{this.___valueListeners[t](this.___value)}catch(s){console.warn("Failed while calling value listeners ",s)}}compare(t){let e=this.get;return e instanceof Promise?e.then(s=>t!==s):t!==e}get inUse(){return this.___valueListeners.length!==0}hasListener(t){return this.___valueListeners.indexOf(t)!==-1}toJSON(){return this.___value}}class H extends M{constructor(e,s){super(e);l(this,"___limiters");l(this,"___limitersListeners",[]);this.___limiters=s}addLimiterListener(e,s){return this.___limitersListeners.push(e),s&&e(this),e}removeLimiterListener(e){let s=this.___limitersListeners.indexOf(e);return s!=-1&&this.___limitersListeners.splice(s,1),e}___updateLimiter(){if(this.___limitersListeners)for(let e=0,s=this.___limitersListeners.length;e<s;e++)try{this.___limitersListeners[e](this)}catch(n){console.warn("Failed while calling value listeners ",n)}}get limiters(){return this.___limiters}set limiters(e){e?this.___limiters=e:delete this.___limiters,this.___updateLimiter()}checkLimit(e){if(this.___limiters){for(let s=0;s<this.___limiters.length;s++)if(this.___limiters[s].func(e))return!1}return!0}checkLimitReason(e){if(this.___limiters)for(let s=0;s<this.___limiters.length;s++){let n=this.___limiters[s];if(n.func(e))if(n.correction)switch(typeof n.reason){case"string":return{allowed:!1,reason:n.reason,correction:n.correction(e)};case"function":return{allowed:!1,reason:n.reason(e),correction:n.correction(e)}}else switch(typeof n.reason){case"string":return{allowed:!1,reason:n.reason};case"function":return{allowed:!1,reason:n.reason(e)}}}return{allowed:!0,reason:""}}set set(e){e===this.___value||!this.checkLimit(e)||(this.___value=e,this.___update())}}class b extends H{constructor(e,s=-1/0,n=1/0,o,c){super(e,c);l(this,"_min");l(this,"_max");l(this,"_step");l(this,"_halfStep",0);l(this,"decimals",0);if(this._min=s,this._max=n,o){this._step=o,this._halfStep=o/2;let u=o.toString().split(".")[1];this.decimals=o<1e14&&u?u.length:0}}get min(){return this._min}set min(e){this._min=e;let s=Math.max(this._min,this.___value);this.___value!==s&&(this.___value=s,this.___update()),this.___updateLimiter()}get max(){return this._max}set max(e){this._max=e;let s=Math.min(this._max,this.___value);this.___value!==s&&(this.___value=s,this.___update()),this.___updateLimiter()}get step(){return this._step}set step(e){if(e){this._step=e,this._halfStep=e/2;let s=e.toString().split(".")[1];this.decimals=e<1e14&&s?s.length:0}else delete this._step,this._halfStep=0,this.decimals=0;this.___updateLimiter()}set set(e){if(this._step){let s=e%this._step;e=Number((s>this._halfStep?e+(this._step-s):e-s).toFixed(this.decimals))}e=Math.min(this._max,Math.max(this._min,e)),e!==this.___value&&this.checkLimit(e)&&(this.___value=e,this.___update())}set setUnchecked(e){super.set=e}}class E extends H{constructor(e,s,n,o,c){super(e,c);l(this,"_maxLength");l(this,"_maxByteLength");l(this,"___enums");this._maxLength=n,this._maxByteLength=o,this.___enums=s}get enums(){return this.___enums}set enums(e){if(e){if(this.___enums=e,!this.checkEnum(this.___value))for(const s in this.___enums){this.___value=s,this.___update();return}}else delete this.___enums;this.___updateLimiter()}get enum(){if(this.___enums)return this.___enums[this.___value]}checkEnum(e){return!this.___enums||e in this.___enums}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e,this._maxLength&&this.___value.length>this._maxLength&&(this.___value=this.___value.slice(0,this._maxLength),this.___update()),this.___updateLimiter()}get maxByteLength(){return this._maxByteLength}set maxByteLength(e){if(this._maxByteLength=e,this._maxByteLength){let s=N(this.___value,this._maxByteLength);this.___value!==s&&(this.___value=s,this.___update())}this.___updateLimiter()}set set(e){this._maxLength&&e.length>this._maxLength&&(e=e.slice(0,this._maxLength)),this._maxByteLength&&(e=N(e,this._maxByteLength)),e!==this.___value&&this.checkLimit(e)&&this.checkEnum(e)&&(this.___value=e,this.___update())}set setUnchecked(e){super.set=e}}var K=Object.defineProperty,R=(i,t,e)=>t in i?K(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,w=(i,t,e)=>(R(i,typeof t!="symbol"?t+"":t,e),e);let O={},W=(i,t,e)=>(O[i]=new I(i,t,e),O[i]);class I{constructor(t,e,s){w(this,"pathID"),w(this,"settings",{}),w(this,"subGroups",{}),w(this,"name"),w(this,"description"),this.pathID=t,this.name=e,this.description=s}makeSubGroup(t,e,s){if(t in this.subGroups){console.warn("Sub group already registered "+t);return}else return this.subGroups[t]=new I(this.pathID+"/"+t,e,s)}makeBooleanSetting(t,e,s,n){if(t in this.settings)throw new Error("Settings already registered "+t);let o=localStorage[this.pathID+"/"+t];if(o)var c=new M(JSON.parse(o));else if(typeof n=="boolean")var c=new M(n);else{var c=new M(!1);n.then(d=>{c.set=d})}return c.info={name:e,description:s},c.addListener(u=>{localStorage[this.pathID+"/"+t]=JSON.stringify(u)},!o),this.settings[t]=c}makeNumberSetting(t,e,s,n,o,c,u,d){if(t in this.settings)throw new Error("Settings already registered "+t);let m=localStorage[this.pathID+"/"+t];if(m)var h=new b(JSON.parse(m),o,c,u,d);else if(typeof n=="number")var h=new b(n,o,c,u,d);else{var h=new b(NaN,o,c,u,d);n.then(f=>{h.set=f})}return h.info={name:e,description:s},h.addListener(g=>{localStorage[this.pathID+"/"+t]=JSON.stringify(g)},!m),this.settings[t]=h}makeStringSetting(t,e,s,n,o,c,u,d){if(t in this.settings)throw new Error("Settings already registered "+t);let m=localStorage[this.pathID+"/"+t];if(m)var h=new E(JSON.parse(m),o,c,u,d);else if(typeof n=="string")var h=new E(n,o,c,u,d);else{var h=new E("",o,c,u,d);n.then(f=>{h.set=f})}return h.info={name:e,description:s},h.addListener(g=>{localStorage[this.pathID+"/"+t]=JSON.stringify(g)},!m),this.settings[t]=h}}var y=(i=>(i.Light="light",i.Dark="dark",i))(y||{});let v=[],k={},x=(i,t)=>{let e;return function(){return e||(e=new DOMParser().parseFromString(t,"image/svg+xml").firstChild,e.setAttribute("icon",i)),e.cloneNode(!0)}},Y=x("material_action_touch_app_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><rect fill="none" height="24" width="24"/></g><g><g><path d="M18.19,12.44l-3.24-1.62c1.29-1,2.12-2.56,2.12-4.32c0-3.03-2.47-5.5-5.5-5.5s-5.5,2.47-5.5,5.5c0,2.13,1.22,3.98,3,4.89 v3.26c-2.15-0.46-2.02-0.44-2.26-0.44c-0.53,0-1.03,0.21-1.41,0.59L4,16.22l5.09,5.09C9.52,21.75,10.12,22,10.74,22h6.3 c0.98,0,1.81-0.7,1.97-1.67l0.8-4.71C20.03,14.32,19.38,13.04,18.19,12.44z M17.84,15.29L17.04,20h-6.3 c-0.09,0-0.17-0.04-0.24-0.1l-3.68-3.68l4.25,0.89V6.5c0-0.28,0.22-0.5,0.5-0.5c0.28,0,0.5,0.22,0.5,0.5v6h1.76l3.46,1.73 C17.69,14.43,17.91,14.86,17.84,15.29z M8.07,6.5c0-1.93,1.57-3.5,3.5-3.5s3.5,1.57,3.5,3.5c0,0.95-0.38,1.81-1,2.44V6.5 c0-1.38-1.12-2.5-2.5-2.5c-1.38,0-2.5,1.12-2.5,2.5v2.44C8.45,8.31,8.07,7.45,8.07,6.5z"/></g></g></svg>'),Q=x("material_device_dark_mode_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><rect fill="none" height="24" width="24"/><path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg>'),X=x("material_device_light_mode_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><rect fill="none" height="24" width="24"/><path d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg>'),Z=x("material_hardware_mouse_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 9c-.04-4.39-3.6-7.93-8-7.93S4.04 4.61 4 9v6c0 4.42 3.58 8 8 8s8-3.58 8-8V9zm-2 0h-5V3.16c2.81.47 4.96 2.9 5 5.84zm-7-5.84V9H6c.04-2.94 2.19-5.37 5-5.84zM18 15c0 3.31-2.69 6-6 6s-6-2.69-6-6v-4h12v4z"/></svg>'),$=x("material_image_edit_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"/></svg>'),_=W(A,"Theme/UI","Settings for UI elements and and color themes"),ee={thin:{name:"Thin",description:"Thin modern scrollbar"},medium:{name:"Medium",description:"Normal scrollbar"},wide:{name:"Wide",description:"Large touch friendly scrollbar"}},te={all:{name:"All",description:"All animations"},most:{name:"Most",description:"All but the heaviest animations"},some:{name:"Some",description:"Only the lightest animations"},none:{name:"None",description:"No animations"}},se={off:{name:"Off",description:"Mouse input"},os:{name:"OS Linked",description:"Pen input"}},ie={[y.Light]:{name:"Light",description:"Don't set touch mode automatically",icon:X()},[y.Dark]:{name:"Dark",description:"Change touch mode on first ui interaction",icon:Q()}},ne={mouse:{name:"Mouse",description:"Mouse input",icon:Z()},pen:{name:"Pen",description:"Pen input",icon:$()},touch:{name:"Touch",description:"Touch input",icon:Y()}},ae={off:{name:"Off",description:"Don't set touch mode automatically"},first:{name:"First Interaction",description:"Change touch mode on first ui interaction"},every:{name:"Every Interaction",description:"Change touch mode on every ui interaction"}};class re{constructor(t,e=""){l(this,"_handler");l(this,"_listener");l(this,"scrollbar");l(this,"animations");l(this,"theme");l(this,"autoThemeMode");l(this,"scale");l(this,"_scale");l(this,"scaleMouse");l(this,"scalePen");l(this,"scaleTouch");l(this,"inputMode");l(this,"autoInputMode");l(this,"_autoInputListenerEvery",t=>{switch(t.pointerType){case"mouse":this.inputMode.set="mouse";break;case"pen":this.inputMode.set="pen";break;default:case"touch":this.inputMode.set="touch";break}});l(this,"textScale");l(this,"textScaleMouse");l(this,"textScalePen");l(this,"textScaleTouch");e&&(e+="-"),this.scrollbar=_.makeStringSetting(e+"scrollbar","Scrollbar","Size of scrollbar","thin",ee),this.scrollbar.addListener(async s=>{this.applyScrollbar(s)}),this.animations=_.makeStringSetting(e+"animations","Animations","Amount of animations in the ui","all",te),this.animations.addListener(async s=>{this.applyAnimation(s)}),this.theme=_.makeStringSetting(e+"theme","Theme","Color theme of UI",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?y.Dark:y.Light,ie),this.theme.addListener(s=>{this.applyTheme(s)}),this.autoThemeMode=_.makeStringSetting(e+"autoTheme","Automatic Theme Change","Toggle for automatically changing theme","os",se),this.inputMode=_.makeStringSetting(e+"inputMode","Input Mode","Toggle between input modes","mouse",ne),this.inputMode.addListener(async s=>{switch(s){case"mouse":this.scale.set=await this.scaleMouse.get;break;case"pen":this.scale.set=await this.scalePen.get;break;case"touch":this.scale.set=await this.scaleTouch.get;break}this.applyInput(s)}),this.autoInputMode=_.makeStringSetting(e+"autoTouch","Automatic Touch Mode","Mode for automatically changing touch mode","every",ae),this.autoInputMode.addListener(s=>{this.applyAutoInput(s)}),this.scaleMouse=_.makeNumberSetting(e+"scaleMouse","UI Scale Mouse","The scale of the UI for mouse usage",1,.5,4,.1),this.scaleMouse.addListener(s=>{this.inputMode.get==="mouse"&&(this.scale.set=s)}),this.scalePen=_.makeNumberSetting(e+"scalePen","UI Scale Pen","The scale of the UI for pen usage",1.2,.5,4,.1),this.scalePen.addListener(s=>{this.inputMode.get==="pen"&&(this.scale.set=s)}),this.scaleTouch=_.makeNumberSetting(e+"scaleTouch","UI Scale Touch","The scale of the UI for touch usage",1.6,.5,4,.1),this.scaleTouch.addListener(s=>{this.inputMode.get==="touch"&&(this.scale.set=s)}),this.scale=new b(1,.5,4,.1),this.scale.addListener(s=>{switch(this._scale=s*16,this.applyScale(s),this.inputMode.get){case"mouse":this.scaleMouse.set=s;break;case"pen":this.scalePen.set=s;break;case"touch":this.scaleTouch.set=s;break}}),this._scale=this.scale.get*16,this.textScaleMouse=_.makeNumberSetting(e+"textScaleMouse","UI Text Scale Mouse Mode","The scale of the UI text for mouse usage",1,.5,2,.1),this.textScaleMouse.addListener(s=>{this.inputMode.get==="mouse"&&(this.textScale.set=s)}),this.textScalePen=_.makeNumberSetting(e+"textScalePen","UI Text Scale Pen Mode","The scale of the UI text for pen usage",1.2,.5,2,.1),this.textScalePen.addListener(s=>{this.inputMode.get==="pen"&&(this.textScale.set=s)}),this.textScaleTouch=_.makeNumberSetting(e+"textScaleTouch","UI Text Scale Touch Mode","The scale of the UI text for touch usage",1.6,.5,2,.1),this.textScaleTouch.addListener(s=>{this.inputMode.get==="touch"&&(this.textScale.set=s)}),this.textScale=new b(1,.5,2,.1),this.textScale.addListener(s=>{switch(this.applyTextScale(s),this.inputMode.get){case"mouse":this.textScaleMouse.set=s;break;case"pen":this.textScalePen.set=s;break;case"touch":this.textScaleTouch.set=s;break}}),v.push(this),this._handler=t,this._listener=this._handler.events.on("added",s=>{this.applyAllToDoc(s.data)}),t.forDocuments(s=>{this.applyAllToDoc(s)})}destructor(){this._handler.events.off("added",this._listener);let t=v.indexOf(this);if(t==-1)return console.warn("Theme engine already destructed");v.splice(t,1)}async applyAllToDoc(t){switch(this.applyScrollbarToDoc(t,await this.scrollbar.get),this.applyAnimationToDoc(t,await this.animations.get),this.applyThemeToDoc(t,await this.theme.get),this.applyAutoInputToDoc(t,await this.autoInputMode.get),this.applyInputToDoc(t,await this.inputMode.get),await this.inputMode.get){case"mouse":this.scale.set=await this.scaleMouse.get;break;case"pen":this.scale.set=await this.scalePen.get;break;case"touch":this.scale.set=await this.scaleTouch.get;break}this.applyScaleToDoc(t,await this.scale.get),this.applyTextScaleToDoc(t,await this.textScale.get)}applyScrollbar(t){this._handler.forDocuments(e=>{this.applyScrollbarToDoc(e,t)})}applyScrollbarToDoc(t,e){t.documentElement.style.setProperty("--scrollbar",{thin:"0.4rem",medium:"1rem",wide:"1.875rem"}[e])}applyAnimation(t){this._handler.forDocuments(e=>{this.applyAnimationToDoc(e,t)})}applyAnimationToDoc(t,e){switch(t.documentElement.classList.remove("anim-all","anim-most","anim-some"),e){case"all":t.documentElement.classList.add("anim-all");case"most":t.documentElement.classList.add("anim-most");case"some":t.documentElement.classList.add("anim-some");break}}applyTheme(t){this._handler.forDocuments(e=>{this.applyThemeToDoc(e,t)})}applyThemeToDoc(t,e){for(const s in k)k[s].applyThemes(t.documentElement.style,e)}applyScale(t){this._handler.forDocuments(e=>{this.applyScaleToDoc(e,t)})}applyScaleToDoc(t,e){t.documentElement.style.fontSize=e*16+"px"}applyTextScale(t){this._handler.forDocuments(e=>{this.applyTextScaleToDoc(e,t)})}applyTextScaleToDoc(t,e){t.documentElement.style.setProperty("--textScale",String(e))}applyInput(t){this._handler.forDocuments(e=>{this.applyInputToDoc(e,t)})}applyInputToDoc(t,e){let s=t.documentElement.style;switch(s.setProperty("--mouse","0"),s.setProperty("--pen","0"),s.setProperty("--touch","0"),t.documentElement.classList.remove("mouse","pen","touch"),e){case"mouse":s.setProperty("--mouse","1"),t.documentElement.classList.add("mouse");break;case"pen":s.setProperty("--pen","1"),t.documentElement.classList.add("pen");break;case"touch":s.setProperty("--touch","1"),t.documentElement.classList.add("touch");break}}applyAutoInput(t){this._handler.forDocuments(e=>{this.applyAutoInputToDoc(e,t)})}applyAutoInputToDoc(t,e){switch(t.documentElement.removeEventListener("pointerdown",this._autoInputListenerEvery,{capture:!0}),e){case"first":t.documentElement.addEventListener("pointerdown",this._autoInputListenerEvery,{capture:!0,once:!0});break;case"every":t.documentElement.addEventListener("pointerdown",this._autoInputListenerEvery,{capture:!0});break}}async applySingleProperty(t,e){let s=await this.theme.get;this._handler.forDocuments(n=>{n.documentElement.style.setProperty(t,e[s])})}remToPx(t){return t*this._scale}pxToRem(t){return t/this._scale}}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{for(let t=0;t<v.length;t++)v[t].autoThemeMode.get==="os"&&(v[t].theme.set=i.matches?y.Dark:y.Light)});let oe=(i,t,e)=>(k[i]=new P(i,t,e),k[i]);class P{constructor(t,e,s){l(this,"pathID");l(this,"variables",{});l(this,"subGroups",{});l(this,"name");l(this,"description");this.pathID=t,this.name=e,this.description=s}makeSubGroup(t,e,s){if(t in this.subGroups)throw new Error("Sub group already registered "+t);return this.subGroups[t]=new P(this.pathID+"/"+t,e,s)}makeVariable(t,e,s,n,o,c,u){if(t in this.variables)throw new Error("Settings already registered "+t);let d="--"+this.pathID+"/"+t,m=this.variables[d]={name:e,desc:s,vars:{[y.Light]:n,[y.Dark]:o}};for(let h=0;h<v.length;h++)v[h].applySingleProperty(d,m.vars)}applyThemes(t,e){for(const s in this.variables)t.setProperty(s,this.variables[s].vars[e]);for(const s in this.subGroups)this.subGroups[s].applyThemes(t,e)}}let D=new q(document),a=new re(D),C=oe(A,"TestVars","TestDescription");C.makeVariable("test","Test Name","Test Description","blue","black","Angle",void 0);C.makeVariable("testText","Test Name","Test Description","black","white","Angle",void 0);C.makeVariable("test2","Test 2 Name","Test 2 Description","test","asdf","Number",{min:0,max:1});let z=i=>{let t=i.body.appendChild(document.createElement("select"));for(const r in a.scrollbar.enums){let p=t.appendChild(document.createElement("option"));p.innerHTML=r}t.addEventListener("change",async r=>{a.scrollbar.set=r.currentTarget.selectedOptions[0].innerHTML}),(async()=>t.value=await a.scrollbar.get)(),a.scrollbar.addListener(r=>{t.value=r});let e=i.body.appendChild(document.createElement("select"));for(const r in a.animations.enums){let p=e.appendChild(document.createElement("option"));p.innerHTML=r}e.addEventListener("change",async r=>{a.animations.set=r.currentTarget.selectedOptions[0].innerHTML}),(async()=>e.value=await a.animations.get)(),a.animations.addListener(r=>{e.value=r});let s=i.body.appendChild(document.createElement("select"));for(const r in a.autoThemeMode.enums){let p=s.appendChild(document.createElement("option"));p.innerHTML=r}s.addEventListener("change",async r=>{a.autoThemeMode.set=r.currentTarget.selectedOptions[0].innerHTML}),(async()=>s.value=await a.autoThemeMode.get)(),a.autoThemeMode.addListener(r=>{s.value=r});let n=a.theme.enums;for(const r in n){let p=i.body.appendChild(document.createElement("button"));p.innerHTML=r,p.addEventListener("click",()=>{a.theme.set=r})}let o=i.body.appendChild(document.createElement("input"));o.type="number",o.addEventListener("change",async()=>{a.scale.set=Number(o.value),o.value=String(await a.scale.get)}),(async()=>o.value=String(await a.scale.get))(),a.scale.addListener(r=>{o.value=String(r)});let c=i.body.appendChild(document.createElement("select"));for(const r in a.inputMode.enums){let p=c.appendChild(document.createElement("option"));p.innerHTML=r}c.addEventListener("change",async r=>{a.inputMode.set=r.currentTarget.selectedOptions[0].innerHTML}),(async()=>c.value=await a.inputMode.get)(),a.inputMode.addListener(r=>{c.value=r});let u=i.body.appendChild(document.createElement("select"));for(const r in a.autoInputMode.enums){let p=u.appendChild(document.createElement("option"));p.innerHTML=r}u.addEventListener("change",async r=>{a.autoInputMode.set=r.currentTarget.selectedOptions[0].innerHTML}),(async()=>u.value=await a.autoInputMode.get)(),a.autoInputMode.addListener(r=>{u.value=r});let d=i.body.appendChild(document.createElement("input"));d.type="number",d.addEventListener("change",async()=>{a.scaleMouse.set=Number(d.value),d.value=String(await a.scaleMouse.get)}),(async()=>d.value=String(await a.scaleMouse.get))(),a.scaleMouse.addListener(r=>{d.value=String(r)});let m=i.body.appendChild(document.createElement("input"));m.type="number",m.addEventListener("change",async()=>{a.scalePen.set=Number(m.value),m.value=String(await a.scalePen.get)}),(async()=>m.value=String(await a.scalePen.get))(),a.scalePen.addListener(r=>{m.value=String(r)});let h=i.body.appendChild(document.createElement("input"));h.type="number",h.addEventListener("change",async()=>{a.scaleTouch.set=Number(h.value),h.value=String(await a.scaleTouch.get)}),(async()=>h.value=String(await a.scaleTouch.get))(),a.scaleTouch.addListener(r=>{h.value=String(r)});let g=i.body.appendChild(document.createElement("input"));g.type="number",g.addEventListener("change",async()=>{a.textScale.set=Number(g.value),g.value=String(await a.textScale.get)}),(async()=>g.value=String(await a.textScale.get))(),a.textScale.addListener(r=>{g.value=String(r)});let f=i.body.appendChild(document.createElement("input"));f.type="number",f.addEventListener("change",async()=>{a.textScaleMouse.set=Number(f.value),f.value=String(await a.textScaleMouse.get)}),(async()=>f.value=String(await a.textScaleMouse.get))(),a.textScaleMouse.addListener(r=>{f.value=String(r)});let L=i.body.appendChild(document.createElement("input"));L.type="number",L.addEventListener("change",async()=>{a.textScalePen.set=Number(L.value),L.value=String(await a.textScalePen.get)}),(async()=>L.value=String(await a.textScalePen.get))(),a.textScalePen.addListener(r=>{L.value=String(r)});let S=i.body.appendChild(document.createElement("input"));S.type="number",S.addEventListener("change",async()=>{a.textScaleTouch.set=Number(S.value),S.value=String(await a.textScaleTouch.get)}),(async()=>S.value=String(await a.textScaleTouch.get))(),a.textScaleTouch.addListener(r=>{S.value=String(r)}),i.body.appendChild(document.createElement("div")).innerHTML="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum volutpat tortor non tempor viverra. Cras ullamcorper ligula massa, fringilla ornare sapien imperdiet ac. Nam sapien diam, lacinia eget ex sed, varius commodo lacus. Aliquam pharetra metus tortor, non congue metus viverra vel. Donec semper malesuada arcu, eget lobortis eros scelerisque."};z(document);let B=document.body.appendChild(document.createElement("button"));B.innerHTML="Open Window";B.onclick=()=>{let i=window.open("","","popup");D.registerDocument(i.document,!0),i==null||i.addEventListener("unload",()=>{D.deregisterDocument(i.document)}),z(i.document)};
